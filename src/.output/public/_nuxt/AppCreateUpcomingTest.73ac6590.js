import{d as j,X as M,b as m,T as N,C as B,E,k as a,s as g,p as S,c as f,o as I,e as A,h as s,f as n,i as l,x as p}from"./entry.68a40b73.js";import{u as K}from"./toast-message.98c30be3.js";const O={class:"flex flex-col gap-4"},H={class:"flex flex-col gap-2"},L=s("label",{for:"courselist"},"Kurzusok listája",-1),X={class:"flex flex-col gap-2"},q=s("label",{for:"testlist"},"Tesztek listája",-1),F={class:"flex flex-col gap-2"},G=s("label",{for:""},"Teszt kitöltésének kezdő időpontja",-1),J={class:"flex flex-col gap-2"},P=s("label",{for:""},"Teszt kitöltésének határideje",-1),Q={class:"flex justify-end mt-2"},$=j({__name:"AppCreateUpcomingTest",setup(W){const V=M("dialogRef"),v=K(),z=m(N),w=m(B),x=m(E),i=a([]),r=a([]),c=a(new Date),u=a(new Date),d=a(!0),k=a(),_=a(),T=g(()=>k.value??[]),C=g(()=>_.value??[]),b=async()=>{try{d.value=!0;const t=await z.listOwned();k.value=t}catch{}d.value=!1},R=async()=>{try{d.value=!0;const t=await w.listOwned();_.value=t}catch{}d.value=!1},D=async()=>{try{await r.value.forEach(async t=>{await i.value.forEach(async e=>{await x.create({testId:e,courseId:t,lastStartDate:u.value,startDate:c.value})})}),V.value.close(),v.showInfo({message:"A tesztek kiírása sikeres!"})}catch{v.showError({message:"Hiba történt a tesztek kiírása során!"})}};return S(()=>{b(),R()}),(t,e)=>{const y=f("MultiSelect"),h=f("Calendar"),U=f("Button");return I(),A("div",null,[s("form",O,[s("div",H,[L,n(y,{id:"courselist",modelValue:l(r),"onUpdate:modelValue":e[0]||(e[0]=o=>p(r)?r.value=o:null),options:l(C),"option-label":"name","option-value":"id","empty-message":"Nincs elérhető kurzus","empty-selection-message":"Nincs kurzus kiválasztva",placeholder:"Válassz a kurzusok közül"},null,8,["modelValue","options"])]),s("div",X,[q,n(y,{id:"testlist",modelValue:l(i),"onUpdate:modelValue":e[1]||(e[1]=o=>p(i)?i.value=o:null),options:l(T),"option-label":"title","option-value":"id","empty-message":"Nincs elérhető teszt","empty-selection-message":"Nincs teszt kiválasztva",placeholder:"Válassz a tesztek közül"},null,8,["modelValue","options"])]),s("div",F,[G,n(h,{modelValue:l(c),"onUpdate:modelValue":e[2]||(e[2]=o=>p(c)?c.value=o:null),"show-time":"","hour-format":"24","show-icon":""},null,8,["modelValue"])]),s("div",J,[P,n(h,{modelValue:l(u),"onUpdate:modelValue":e[3]||(e[3]=o=>p(u)?u.value=o:null),"show-time":"","hour-format":"24","show-icon":""},null,8,["modelValue"])]),s("div",Q,[n(U,{label:"Kiírás",onClick:D})])])])}}});export{$ as default};
